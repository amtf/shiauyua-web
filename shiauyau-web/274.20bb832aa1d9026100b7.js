"use strict";(self.webpackChunklearn_react_by_brad=self.webpackChunklearn_react_by_brad||[]).push([[274],{7274:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(7294),r=s(3983),l=s(195),c=s(9669),n=s.n(c),o=s(9847);const i=function(){const[e,t]=(0,l.x)({searchTerm:"",results:[],show:"neither",requestCount:0}),s=(0,a.useContext)(r.Z);function c(e){27==e.keyCode&&s({type:"closeSearch"})}return(0,a.useEffect)((()=>(document.addEventListener("keyup",c),()=>{document.removeEventListener("keyup",c)})),[]),(0,a.useEffect)((()=>{if(e.searchTerm.trim()){t((e=>{e.show="loading"}));const e=setTimeout((()=>{t((e=>{e.requestCount++}))}),700);return()=>{clearTimeout(e)}}t((e=>{e.show="neither"}))}),[e.searchTerm]),(0,a.useEffect)((()=>{if(e.requestCount){async function s(){try{const s=await n().post("http://localhost:8080/search",{searchTerm:e.searchTerm});t((e=>{e.results=s.data,e.show="results"}))}catch(e){console.log("There was a problem or the request is cancelled.")}}s()}}),[e.requestCount]),a.createElement(a.Fragment,null,a.createElement("div",{className:"search-overlay-top shadow-sm"},a.createElement("div",{className:"container container--narrow"},a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},a.createElement("i",{className:"fas fa-search"})),a.createElement("input",{onChange:function(e){const s=e.target.value;t((e=>{e.searchTerm=s}))},autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),a.createElement("span",{onClick:()=>s({type:"closeSearch"}),className:"close-live-search"},a.createElement("i",{className:"fas fa-times-circle"})))),a.createElement("div",{className:"search-overlay-bottom"},a.createElement("div",{className:"container container--narrow py-3"},a.createElement("div",{className:"circle-loader "+("loading"==e.show?"circle-loader--visible":"")}),a.createElement("div",{className:"live-search-results "+("results"==e.show?"live-search-results--visible":"")},Boolean(e.results.length)&&a.createElement("div",{className:"list-group shadow-sm"},a.createElement("div",{className:"list-group-item active"},a.createElement("strong",null,"Search Results")," (",e.results.length," ",e.results.length>=2?"items":"item"," found)"),e.results.map((e=>a.createElement(o.Z,{post:e,key:e._id,onClick:()=>{s({type:"closeSearch"})}})))),!Boolean(e.results.length)&&a.createElement("p",{className:"alert alert-danger text-center shadow-sm"},"Sorry, we could not find any results.")))))}}}]);